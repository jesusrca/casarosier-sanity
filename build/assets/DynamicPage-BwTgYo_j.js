import{g as b,u as P,r as c,j as s,h as f,m as N,k as T}from"./index-C-MaeUF8.js";import{H as L}from"./Hero-WeETgx9I.js";import{S as p}from"./SEOHead-DF7fezjo.js";import{NotFound as v}from"./NotFound-XOza6TrM.js";import{P as w}from"./PageSection-hNRjG1zh.js";import"./00083d30bea445cb191f41f57aa132965c193e0d-ClcUdGo_.js";import"./arrow-right-B3pmyTDb.js";import"./index-D3tpox7u.js";function U(){const{slug:n}=b(),{getPageBySlug:j,loading:l,settings:r,pages:d}=P(),[h,y]=c.useState(!1),[o,S]=c.useState(null),[m,k]=c.useState(!0);c.useEffect(()=>{n&&(async()=>{try{const t=await T(n);if(t&&t.visible){let i=[...t.sections||[]];const u=i[0]?.type==="hero";(t.heroImage||t.heroTitle)&&!u&&(i=[{type:"hero",image:t.heroImage,title:t.heroTitle||t.title,subtitle:t.heroSubtitle||""},...i]);const g={...t,sections:i};console.log("‚úÖ Landing page transformado:",{original:t,transformed:g,hasHeroImage:!!t.heroImage,sectionsCount:i.length}),S(g)}}catch{console.log("No landing page found, checking custom pages")}finally{k(!1)}})()},[n]);const e=j(n||"");if(c.useEffect(()=>{console.log("üîç DynamicPage Debug:",{slug:n,loading:l,pageFound:!!e,pageTitle:e?.title,totalPages:d?.length,availablePages:d?.map(a=>({slug:a.slug,title:a.title}))})},[n,e,l,d]),c.useEffect(()=>{if(!e&&!l&&!m){const a=setTimeout(()=>{console.log("‚ö†Ô∏è Mostrando 404 para slug:",n),y(!0)},600);return()=>clearTimeout(a)}else y(!1)},[e,l,n,m]),l||!e&&!o&&!h&&m)return s.jsx(f,{});if(o)return console.log("üìÑ Landing Page detectada:",{title:o.title,slug:o.slug,sectionsCount:o.sections?.length||0,sections:o.sections}),s.jsxs("div",{className:"min-h-screen",children:[s.jsx(p,{title:o.seo?.metaTitle||o.title,description:o.seo?.metaDescription,keywords:Array.isArray(o.seo?.keywords)?o.seo?.keywords.join(", "):o.seo?.keywords,image:o.heroImage,url:`${r.ogUrl||window.location.origin}/${n}`,type:r.ogType||"website"}),o.sections&&o.sections.length>0&&o.sections.map((a,t)=>s.jsx(w,{section:a,siteSettings:r,isFirstSection:t===0},t))]});if(!e&&h)return s.jsx(v,{});if(!e)return s.jsx(f,{});if(e.sections&&e.sections.length>0){const a=e.sections[0],t=a?.type==="hero",i=t?a:null,u=t?e.sections.slice(1):e.sections;return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(p,{title:e.seo?.metaTitle||e.title,description:e.seo?.metaDescription,keywords:Array.isArray(e.seo?.keywords)?e.seo?.keywords.join(", "):e.seo?.keywords,image:i?.image,url:`${r.ogUrl||window.location.origin}/${n}`,type:r.ogType||"website"}),i&&s.jsx(L,{backgroundImage:i.image||"",title:i.title||"estudio Cer√°mica",subtitle:i.subtitle||"creativa en Barcelona",titleImage:i.titleImage}),u.map((g,x)=>s.jsx(w,{section:g,siteSettings:r},x))]})}return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(p,{title:e.seo?.metaTitle||e.title,description:e.seo?.metaDescription,keywords:Array.isArray(e.seo?.keywords)?e.seo?.keywords.join(", "):e.seo?.keywords,url:`${r.ogUrl||window.location.origin}/${n}`,type:r.ogType||"website"}),s.jsx("section",{className:"py-16 lg:py-24 bg-background",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs(N.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-lg shadow-lg p-8 lg:p-12",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl mb-8 text-center",children:e.title}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-foreground/60 mb-4",children:"Esta p√°gina a√∫n no tiene secciones."}),s.jsx("p",{className:"text-base text-foreground/40",children:"Puedes editarla desde el administrador agregando secciones."})]})]})})})]})}export{U as DynamicPage};
